---
import type {GetStaticPathsResult} from 'astro';
export const prerender = true;

import {
  DefaultApi,
  type Character,
} from '../../../lib/rick-and-morty-api-client';
import CharacterDetails from '../../components/CharacterDetails';
import Layout from '../../layouts/layout.astro';

export async function getStaticPaths(): Promise<GetStaticPathsResult> {
  const api = new DefaultApi();
  return [
    {
      params: {id: '1'},
      props: {character: await api.getSingleCharacter({id: 1})},
    },
    {
      params: {id: '2'},
      props: {character: await api.getSingleCharacter({id: 2})},
    },
    {
      params: {id: '3'},
      props: {character: await api.getSingleCharacter({id: 3})},
    },
  ];
}

const character = Astro.props.character as Character;
---

<Layout>
  <CharacterDetails {character} client:load />
</Layout>
