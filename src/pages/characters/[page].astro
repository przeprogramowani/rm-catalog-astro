---
export const prerender = true;

import type {GetStaticPathsResult} from 'astro';
import {
  DefaultApi,
  type CharacterListResponse,
} from '../../../lib/rick-and-morty-api-client';
import Characters from '../../components/Characters';
import Layout from '../../layouts/layout.astro';

export async function getStaticPaths(): Promise<GetStaticPathsResult> {
  const api = new DefaultApi();
  return [
    {
      params: {page: '1'},
      props: {response: await api.getCharacters({page: 1})},
    },
    {
      params: {page: '2'},
      props: {response: await api.getCharacters({page: 2})},
    },
    {
      params: {page: '3'},
      props: {response: await api.getCharacters({page: 3})},
    },
  ];
}

const response = Astro.props.response as CharacterListResponse;
---

<Layout>
  <Characters {...response} client:load />
</Layout>
